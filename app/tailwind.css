@tailwind base;
@tailwind components;
@tailwind utilities;

html,
body {
  @apply bg-white dark:bg-gray-950;

  @media (prefers-color-scheme: dark) {
    color-scheme: dark;
  }
}

/* iOS PWA 安全区域优化 */
@supports (padding: max(0px)) {
  html {
    /* 确保背景色延伸到整个屏幕 */
    background: white;
    padding: 0;
    margin: 0;
  }

  html.dark {
    background: #030712; /* gray-950 */
  }

  body {
    /* 避免内容被状态栏和底部安全区域遮挡 */
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);

    /* 确保最小高度覆盖整个视口 */
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }

  /* Header 需要考虑顶部安全区域 */
  header {
    /* 如果 header 是 sticky，需要从顶部安全区域开始 */
    top: env(safe-area-inset-top);
  }
}

/* 针对 iOS 全屏 PWA 的特殊处理 */
@media screen and (display-mode: standalone) {
  html {
    /* 在 standalone 模式下确保背景色正确 */
    background: white;
  }

  html.dark {
    background: #030712;
  }

  /* 状态栏区域背景色处理 */
  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: env(safe-area-inset-top);
    background: white;
    z-index: 9999;
    pointer-events: none;
  }

  .dark body::before {
    background: #030712;
  }
}

/* Tailwind utilities for safe area */
.pt-safe {
  padding-top: env(safe-area-inset-top);
}

.pb-safe {
  padding-bottom: env(safe-area-inset-bottom);
}

.pl-safe {
  padding-left: env(safe-area-inset-left);
}

.pr-safe {
  padding-right: env(safe-area-inset-right);
}

.mt-safe {
  margin-top: env(safe-area-inset-top);
}

.mb-safe {
  margin-bottom: env(safe-area-inset-bottom);
}
